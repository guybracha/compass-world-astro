---
import type { Lang } from "../lib/i18n";

const currentLang = (Astro.params.lang as Lang) || "en";
const otherLang: Lang = currentLang === "he" ? "en" : "he";

// בניית קישור זהה אך עם שפה אחרת
const path = Astro.url.pathname.replace(/^\/(en|he)/, "");
const BASE = import.meta.env.BASE_URL || "/";
const targetHref = `${BASE}${otherLang}${path}`;
---

<a
  href={targetHref}
  class="btn btn-sm btn-outline-light"
  aria-label={currentLang === "he" ? "Switch to English" : "החלף לעברית"}
  onClick={`try{localStorage.setItem('cw:lang','${otherLang}')}catch(e){}`}
>
  {currentLang === "he" ? "English" : "עברית"}
</a>
